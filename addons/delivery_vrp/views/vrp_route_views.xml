<?xml version="1.0" encoding="utf-8"?>    
<odoo>    
    <!-- Vue liste des tournées -->    
    <record id="vrp_route_view_tree" model="ir.ui.view">    
        <field name="name">vrp.route.tree</field>    
        <field name="model">vrp.route</field>  
        <field name="type">list</field>  
        <field name="arch" type="xml">    
            <list decoration-info="state=='draft'" decoration-success="state=='done'" decoration-warning="state=='planned'">    
                <field name="name"/>    
                <field name="date"/>    
                <field name="vehicle_id"/>    
                <field name="total_distance"/>    
                <field name="total_duration"/>    
                <field name="load_rate"/>    
                <field name="state"/>    
            </list>    
        </field>    
    </record>    
    
    <!-- Vue formulaire des tournées -->    
    <record id="vrp_route_view_form" model="ir.ui.view">    
        <field name="name">vrp.route.form</field>    
        <field name="model">vrp.route</field>    
        <field name="arch" type="xml">    
            <form>    
                <header>    
                    <button name="action_plan" string="Planifier" type="object" invisible="state != 'draft'" class="oe_highlight"/>    
                    <button name="action_start" string="Démarrer" type="object" invisible="state != 'planned'" class="oe_highlight"/>    
                    <button name="action_complete" string="Terminer" type="object" invisible="state != 'in_progress'" class="oe_highlight"/>    
                    <button name="action_cancel" string="Annuler" type="object" invisible="state not in ['draft','planned','in_progress']"/>    
                    <field name="state" widget="statusbar" statusbar_visible="draft,planned,in_progress,done"/>    
                </header>    
                <sheet>    
                    <div class="oe_title">    
                        <h1>    
                            <field name="name" placeholder="Nom de la tournée"/>    
                        </h1>    
                    </div>    
                    <group>    
                        <group>    
                            <field name="date"/>    
                            <field name="vehicle_id"/>    
                            <field name="optimization_id"/>    
                        </group>    
                        <group>    
                            <field name="total_distance"/>    
                            <field name="total_duration"/>    
                            <field name="total_demand"/>    
                            <field name="load_rate"/>    
                        </group>    
                    </group>    
                    <notebook>    
                        <page string="Visites">    
                            <field name="visit_ids">    
                                <list editable="bottom">    
                                    <field name="sequence"/>    
                                    <field name="customer_id"/>    
                                    <field name="planned_arrival" widget="float_time"/>    
                                    <field name="planned_departure" widget="float_time"/>    
                                    <field name="actual_arrival" widget="float_time"/>    
                                    <field name="actual_departure" widget="float_time"/>    
                                    <field name="distance_from_previous"/>    
                                    <field name="state"/>    
                                </list>    
                            </field>    
                        </page>    
                    </notebook>    
                </sheet>    
            </form>    
        </field>    
    </record>    
    
    <!-- Vue liste des visites -->    
    <record id="vrp_visit_view_tree" model="ir.ui.view">    
        <field name="name">vrp.visit.tree</field>    
        <field name="model">vrp.visit</field>  
        <field name="type">list</field>  
        <field name="arch" type="xml">    
            <list>    
                <field name="route_id"/>    
                <field name="sequence"/>    
                <field name="customer_id"/>    
                <field name="planned_arrival" widget="float_time"/>    
                <field name="planned_departure" widget="float_time"/>    
                <field name="state"/>    
            </list>    
        </field>    
    </record>    
    
    <!-- Actions -->    
    <record id="vrp_route_action" model="ir.actions.act_window">    
        <field name="name">Tournées VRP</field>    
        <field name="res_model">vrp.route</field>    
        <field name="view_mode">list,form</field>    
        <field name="help" type="html">    
            <p class="o_view_nocontent_smiling_face">    
                Aucune tournée trouvée    
            </p>    
            <p>    
                Les tournées sont générées automatiquement par l'optimisation VRP.    
            </p>    
        </field>    
    </record>    
    
    <record id="vrp_visit_action" model="ir.actions.act_window">    
        <field name="name">Visites VRP</field>    
        <field name="res_model">vrp.visit</field>    
        <field name="view_mode">list,form</field>    
    </record>    
</odoo>